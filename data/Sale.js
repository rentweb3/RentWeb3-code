import { parseEther } from "ethers/lib/utils";
import { getProviderOrSigner } from "./accountsConnection";
import { getNetworkTronweb } from "./TronAccountsManagement";
import {
  getCustomNetworkWebsiteRentContract,
  getPolygonWebsiteRentContract,
  getTronWebsiteRentContract,
} from "./WebsiteRent";
import { getPolygonWhitelistTrackerContract } from "./Whitelist";
export const SaleABI = [
  {
    inputs: [
      {
        internalType: "address",
        name: "whitelistContractAddress",
        type: "address",
      },
      {
        internalType: "string",
        name: "name",
        type: "string",
      },
      {
        internalType: "string",
        name: "symbol",
        type: "string",
      },
      {
        internalType: "address",
        name: "_owner",
        type: "address",
      },
      {
        internalType: "string",
        name: "_baseURI",
        type: "string",
      },
      {
        internalType: "uint256",
        name: "startTime",
        type: "uint256",
      },
      {
        internalType: "uint256",
        name: "endTime",
        type: "uint256",
      },
      {
        internalType: "uint256",
        name: "_presaleMintRate",
        type: "uint256",
      },
      {
        internalType: "uint256",
        name: "_publicMintRate",
        type: "uint256",
      },
      {
        internalType: "uint256",
        name: "_totalSupply",
        type: "uint256",
      },
    ],
    stateMutability: "nonpayable",
    type: "constructor",
  },
  {
    anonymous: false,
    inputs: [
      {
        indexed: true,
        internalType: "address",
        name: "owner",
        type: "address",
      },
      {
        indexed: true,
        internalType: "address",
        name: "approved",
        type: "address",
      },
      {
        indexed: true,
        internalType: "uint256",
        name: "tokenId",
        type: "uint256",
      },
    ],
    name: "Approval",
    type: "event",
  },
  {
    anonymous: false,
    inputs: [
      {
        indexed: true,
        internalType: "address",
        name: "owner",
        type: "address",
      },
      {
        indexed: true,
        internalType: "address",
        name: "operator",
        type: "address",
      },
      {
        indexed: false,
        internalType: "bool",
        name: "approved",
        type: "bool",
      },
    ],
    name: "ApprovalForAll",
    type: "event",
  },
  {
    anonymous: false,
    inputs: [
      {
        indexed: true,
        internalType: "address",
        name: "from",
        type: "address",
      },
      {
        indexed: true,
        internalType: "address",
        name: "to",
        type: "address",
      },
      {
        indexed: true,
        internalType: "uint256",
        name: "tokenId",
        type: "uint256",
      },
    ],
    name: "Transfer",
    type: "event",
  },
  {
    inputs: [
      {
        internalType: "uint256",
        name: "_openingTime",
        type: "uint256",
      },
      {
        internalType: "uint256",
        name: "_closingTime",
        type: "uint256",
      },
    ],
    name: "TimedCrowdsale",
    outputs: [],
    stateMutability: "nonpayable",
    type: "function",
  },
  {
    inputs: [
      {
        internalType: "address",
        name: "to",
        type: "address",
      },
      {
        internalType: "uint256",
        name: "tokenId",
        type: "uint256",
      },
    ],
    name: "approve",
    outputs: [],
    stateMutability: "nonpayable",
    type: "function",
  },
  {
    inputs: [
      {
        internalType: "address",
        name: "owner",
        type: "address",
      },
    ],
    name: "balanceOf",
    outputs: [
      {
        internalType: "uint256",
        name: "",
        type: "uint256",
      },
    ],
    stateMutability: "view",
    type: "function",
  },
  {
    inputs: [],
    name: "baseExtension",
    outputs: [
      {
        internalType: "string",
        name: "",
        type: "string",
      },
    ],
    stateMutability: "view",
    type: "function",
  },
  {
    inputs: [],
    name: "baseURI",
    outputs: [
      {
        internalType: "string",
        name: "",
        type: "string",
      },
    ],
    stateMutability: "view",
    type: "function",
  },
  {
    inputs: [],
    name: "checkStage",
    outputs: [
      {
        internalType: "enum Sale.Stage",
        name: "stage",
        type: "uint8",
      },
    ],
    stateMutability: "view",
    type: "function",
  },
  {
    inputs: [],
    name: "endTime",
    outputs: [
      {
        internalType: "uint256",
        name: "",
        type: "uint256",
      },
    ],
    stateMutability: "view",
    type: "function",
  },
  {
    inputs: [
      {
        internalType: "uint256",
        name: "tokenId",
        type: "uint256",
      },
    ],
    name: "getApproved",
    outputs: [
      {
        internalType: "address",
        name: "",
        type: "address",
      },
    ],
    stateMutability: "view",
    type: "function",
  },
  {
    inputs: [
      {
        internalType: "uint256",
        name: "tokenId",
        type: "uint256",
      },
    ],
    name: "getNFTPrice",
    outputs: [
      {
        internalType: "uint256",
        name: "",
        type: "uint256",
      },
    ],
    stateMutability: "view",
    type: "function",
  },
  {
    inputs: [
      {
        internalType: "address",
        name: "owner",
        type: "address",
      },
      {
        internalType: "address",
        name: "operator",
        type: "address",
      },
    ],
    name: "isApprovedForAll",
    outputs: [
      {
        internalType: "bool",
        name: "",
        type: "bool",
      },
    ],
    stateMutability: "view",
    type: "function",
  },
  {
    inputs: [
      {
        internalType: "uint256",
        name: "tokenId",
        type: "uint256",
      },
    ],
    name: "isTokenIdExists",
    outputs: [
      {
        internalType: "bool",
        name: "",
        type: "bool",
      },
    ],
    stateMutability: "view",
    type: "function",
  },
  {
    inputs: [
      {
        internalType: "address",
        name: "xyz",
        type: "address",
      },
    ],
    name: "isWhitelisted",
    outputs: [
      {
        internalType: "bool",
        name: "",
        type: "bool",
      },
    ],
    stateMutability: "nonpayable",
    type: "function",
  },
  {
    inputs: [],
    name: "name",
    outputs: [
      {
        internalType: "string",
        name: "",
        type: "string",
      },
    ],
    stateMutability: "view",
    type: "function",
  },
  {
    inputs: [],
    name: "owner",
    outputs: [
      {
        internalType: "address",
        name: "",
        type: "address",
      },
    ],
    stateMutability: "view",
    type: "function",
  },
  {
    inputs: [
      {
        internalType: "uint256",
        name: "tokenId",
        type: "uint256",
      },
    ],
    name: "ownerOf",
    outputs: [
      {
        internalType: "address",
        name: "",
        type: "address",
      },
    ],
    stateMutability: "view",
    type: "function",
  },
  {
    inputs: [],
    name: "presaleMintRate",
    outputs: [
      {
        internalType: "uint256",
        name: "",
        type: "uint256",
      },
    ],
    stateMutability: "view",
    type: "function",
  },
  {
    inputs: [],
    name: "publicMintRate",
    outputs: [
      {
        internalType: "uint256",
        name: "",
        type: "uint256",
      },
    ],
    stateMutability: "view",
    type: "function",
  },
  {
    inputs: [
      {
        internalType: "uint256",
        name: "tokenId",
        type: "uint256",
      },
    ],
    name: "purchaseThisToken",
    outputs: [],
    stateMutability: "payable",
    type: "function",
  },
  {
    inputs: [
      {
        internalType: "address",
        name: "from",
        type: "address",
      },
      {
        internalType: "address",
        name: "to",
        type: "address",
      },
      {
        internalType: "uint256",
        name: "tokenId",
        type: "uint256",
      },
    ],
    name: "safeTransferFrom",
    outputs: [],
    stateMutability: "nonpayable",
    type: "function",
  },
  {
    inputs: [
      {
        internalType: "address",
        name: "from",
        type: "address",
      },
      {
        internalType: "address",
        name: "to",
        type: "address",
      },
      {
        internalType: "uint256",
        name: "tokenId",
        type: "uint256",
      },
      {
        internalType: "bytes",
        name: "data",
        type: "bytes",
      },
    ],
    name: "safeTransferFrom",
    outputs: [],
    stateMutability: "nonpayable",
    type: "function",
  },
  {
    inputs: [
      {
        internalType: "address",
        name: "operator",
        type: "address",
      },
      {
        internalType: "bool",
        name: "approved",
        type: "bool",
      },
    ],
    name: "setApprovalForAll",
    outputs: [],
    stateMutability: "nonpayable",
    type: "function",
  },
  {
    inputs: [
      {
        internalType: "uint256",
        name: "newFee",
        type: "uint256",
      },
    ],
    name: "setMINTING_FEE_FRACTION",
    outputs: [],
    stateMutability: "nonpayable",
    type: "function",
  },
  {
    inputs: [
      {
        internalType: "uint256",
        name: "tokenId",
        type: "uint256",
      },
      {
        internalType: "uint256",
        name: "price",
        type: "uint256",
      },
    ],
    name: "setNFTPrice",
    outputs: [],
    stateMutability: "nonpayable",
    type: "function",
  },
  {
    inputs: [
      {
        internalType: "address",
        name: "newBeneficiary",
        type: "address",
      },
    ],
    name: "setPLATFORM_BENEFICIARY",
    outputs: [],
    stateMutability: "nonpayable",
    type: "function",
  },
  {
    inputs: [],
    name: "startTime",
    outputs: [
      {
        internalType: "uint256",
        name: "",
        type: "uint256",
      },
    ],
    stateMutability: "view",
    type: "function",
  },
  {
    inputs: [
      {
        internalType: "bytes4",
        name: "interfaceId",
        type: "bytes4",
      },
    ],
    name: "supportsInterface",
    outputs: [
      {
        internalType: "bool",
        name: "",
        type: "bool",
      },
    ],
    stateMutability: "view",
    type: "function",
  },
  {
    inputs: [],
    name: "symbol",
    outputs: [
      {
        internalType: "string",
        name: "",
        type: "string",
      },
    ],
    stateMutability: "view",
    type: "function",
  },
  {
    inputs: [
      {
        internalType: "uint256",
        name: "tokenId",
        type: "uint256",
      },
    ],
    name: "tokenURI",
    outputs: [
      {
        internalType: "string",
        name: "",
        type: "string",
      },
    ],
    stateMutability: "view",
    type: "function",
  },
  {
    inputs: [],
    name: "totalSupply",
    outputs: [
      {
        internalType: "uint256",
        name: "",
        type: "uint256",
      },
    ],
    stateMutability: "view",
    type: "function",
  },
  {
    inputs: [
      {
        internalType: "address",
        name: "from",
        type: "address",
      },
      {
        internalType: "address",
        name: "to",
        type: "address",
      },
      {
        internalType: "uint256",
        name: "tokenId",
        type: "uint256",
      },
    ],
    name: "transferFrom",
    outputs: [],
    stateMutability: "nonpayable",
    type: "function",
  },
  {
    inputs: [],
    name: "withdraw",
    outputs: [],
    stateMutability: "nonpayable",
    type: "function",
  },
];
export const SaleBytecode = {
  object:
    "60806040526040518060400160405280600581526020017f2e6a736f6e000000000000000000000000000000000000000000000000000000815250600e90805190602001906200005192919062000224565b5073be68ee8a43ce119a56625d7e645abaf74652d5e1600f60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506064601055348015620000b957600080fd5b50604051620040be380380620040be8339818101604052810190620000df919062000380565b88888160009080519060200190620000f992919062000224565b5080600190805190602001906200011292919062000224565b50505089600760006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555086600a60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555033600f60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550846008819055508360098190555082600b8190555081600c8190555085600d90805190602001906200020c92919062000224565b508060118190555050505050505050505050620006c9565b8280546200023290620005a6565b90600052602060002090601f016020900481019282620002565760008555620002a2565b82601f106200027157805160ff1916838001178555620002a2565b82800160010185558215620002a2579182015b82811115620002a157825182559160200191906001019062000284565b5b509050620002b19190620002b5565b5090565b5b80821115620002d0576000816000905550600101620002b6565b5090565b6000620002eb620002e584620004fc565b620004d3565b9050828152602081018484840111156200030a576200030962000675565b5b6200031784828562000570565b509392505050565b600081519050620003308162000695565b92915050565b600082601f8301126200034e576200034d62000670565b5b815162000360848260208601620002d4565b91505092915050565b6000815190506200037a81620006af565b92915050565b6000806000806000806000806000806101408b8d031215620003a757620003a66200067f565b5b6000620003b78d828e016200031f565b9a505060208b015167ffffffffffffffff811115620003db57620003da6200067a565b5b620003e98d828e0162000336565b99505060408b015167ffffffffffffffff8111156200040d576200040c6200067a565b5b6200041b8d828e0162000336565b98505060606200042e8d828e016200031f565b97505060808b015167ffffffffffffffff8111156200045257620004516200067a565b5b620004608d828e0162000336565b96505060a0620004738d828e0162000369565b95505060c0620004868d828e0162000369565b94505060e0620004998d828e0162000369565b935050610100620004ad8d828e0162000369565b925050610120620004c18d828e0162000369565b9150509295989b9194979a5092959850565b6000620004df620004f2565b9050620004ed8282620005dc565b919050565b6000604051905090565b600067ffffffffffffffff8211156200051a576200051962000641565b5b620005258262000684565b9050602081019050919050565b60006200053f8262000546565b9050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b60005b838110156200059057808201518184015260208101905062000573565b83811115620005a0576000848401525b50505050565b60006002820490506001821680620005bf57607f821691505b60208210811415620005d657620005d562000612565b5b50919050565b620005e78262000684565b810181811067ffffffffffffffff8211171562000609576200060862000641565b5b80604052505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600080fd5b600080fd5b600080fd5b600080fd5b6000601f19601f8301169050919050565b620006a08162000532565b8114620006ac57600080fd5b50565b620006ba8162000566565b8114620006c657600080fd5b50565b6139e580620006d96000396000f3fe6080604052600436106101d85760003560e01c80636c0360eb11610102578063b0aedd1311610095578063e6c362c911610064578063e6c362c9146106d4578063e7406558146106f0578063e985e9c514610719578063f7a5645f14610756576101d8565b8063b0aedd131461061a578063b88d4fde14610643578063c66828621461066c578063c87b56dd14610697576101d8565b80638da5cb5b116100d15780638da5cb5b1461055e578063929761791461058957806395d89b41146105c6578063a22cb465146105f1576101d8565b80636c0360eb146104a057806370a08231146104cb57806378e97925146105085780637f93c75114610533576101d8565b806321ba7e341161017a5780633ccfd60b116101495780633ccfd60b146103f857806342842e0e1461040f57806362e547db146104385780636352211e14610463576101d8565b806321ba7e341461033c57806323b872dd146103675780633197cbb6146103905780633af32abf146103bb576101d8565b80630944e35d116101b65780630944e35d14610282578063095ea7b3146102ab57806318160ddd146102d45780631c615321146102ff576101d8565b806301ffc9a7146101dd57806306fdde031461021a578063081812fc14610245575b600080fd5b3480156101e957600080fd5b5061020460048036038101906101ff91906127a8565b61077f565b6040516102119190612d35565b60405180910390f35b34801561022657600080fd5b5061022f610861565b60405161023c9190612d6b565b60405180910390f35b34801561025157600080fd5b5061026c60048036038101906102679190612802565b6108f3565b6040516102799190612c97565b60405180910390f35b34801561028e57600080fd5b506102a960048036038101906102a4919061282f565b610939565b005b3480156102b757600080fd5b506102d260048036038101906102cd919061273b565b610a61565b005b3480156102e057600080fd5b506102e9610b79565b6040516102f69190612fed565b60405180910390f35b34801561030b57600080fd5b5061032660048036038101906103219190612802565b610b7f565b6040516103339190612d35565b60405180910390f35b34801561034857600080fd5b50610351610ba9565b60405161035e9190612fed565b60405180910390f35b34801561037357600080fd5b5061038e60048036038101906103899190612625565b610baf565b005b34801561039c57600080fd5b506103a5610c0f565b6040516103b29190612fed565b60405180910390f35b3480156103c757600080fd5b506103e260048036038101906103dd91906125b8565b610c19565b6040516103ef9190612d35565b60405180910390f35b34801561040457600080fd5b5061040d610ce0565b005b34801561041b57600080fd5b5061043660048036038101906104319190612625565b610da5565b005b34801561044457600080fd5b5061044d610dc5565b60405161045a9190612fed565b60405180910390f35b34801561046f57600080fd5b5061048a60048036038101906104859190612802565b610dcb565b6040516104979190612c97565b60405180910390f35b3480156104ac57600080fd5b506104b5610e7d565b6040516104c29190612d6b565b60405180910390f35b3480156104d757600080fd5b506104f260048036038101906104ed91906125b8565b610f0b565b6040516104ff9190612fed565b60405180910390f35b34801561051457600080fd5b5061051d610fc3565b60405161052a9190612fed565b60405180910390f35b34801561053f57600080fd5b50610548610fcd565b6040516105559190612d50565b60405180910390f35b34801561056a57600080fd5b5061057361101a565b6040516105809190612c97565b60405180910390f35b34801561059557600080fd5b506105b060048036038101906105ab9190612802565b611040565b6040516105bd9190612fed565b60405180910390f35b3480156105d257600080fd5b506105db61111b565b6040516105e89190612d6b565b60405180910390f35b3480156105fd57600080fd5b50610618600480360381019061061391906126fb565b6111ad565b005b34801561062657600080fd5b50610641600480360381019061063c91906125b8565b6111c3565b005b34801561064f57600080fd5b5061066a60048036038101906106659190612678565b611261565b005b34801561067857600080fd5b506106816112c3565b60405161068e9190612d6b565b60405180910390f35b3480156106a357600080fd5b506106be60048036038101906106b99190612802565b611351565b6040516106cb9190612d6b565b60405180910390f35b6106ee60048036038101906106e99190612802565b611391565b005b3480156106fc57600080fd5b506107176004803603810190610712919061282f565b611700565b005b34801561072557600080fd5b50610740600480360381019061073b91906125e5565b611792565b60405161074d9190612d35565b60405180910390f35b34801561076257600080fd5b5061077d60048036038101906107789190612802565b611826565b005b60007f80ac58cd000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916148061084a57507f5b5e139f000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b8061085a57506108598261188a565b5b9050919050565b60606000805461087090613276565b80601f016020809104026020016040519081016040528092919081815260200182805461089c90613276565b80156108e95780601f106108be576101008083540402835291602001916108e9565b820191906000526020600020905b8154815290600101906020018083116108cc57829003601f168201915b5050505050905090565b60006108fe826118f4565b6004600083815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050919050565b3373ffffffffffffffffffffffffffffffffffffffff16600a60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16146109c9576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016109c090612ecd565b60405180910390fd5b42821015610a0c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a0390612f4d565b60405180910390fd5b81811015610a4f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a4690612fad565b60405180910390fd5b81600881905550806009819055505050565b6000610a6c82610dcb565b90508073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff161415610add576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ad490612f8d565b60405180910390fd5b8073ffffffffffffffffffffffffffffffffffffffff16610afc61193f565b73ffffffffffffffffffffffffffffffffffffffff161480610b2b5750610b2a81610b2561193f565b611792565b5b610b6a576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b6190612f0d565b60405180910390fd5b610b748383611947565b505050565b60115481565b600060011515610b8e83611a00565b15151415610b9f5760019050610ba4565b600090505b919050565b600c5481565b610bc0610bba61193f565b82611a6c565b610bff576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610bf690612fcd565b60405180910390fd5b610c0a838383611b01565b505050565b6000600954905090565b6000600760009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16633af32abf836040518263ffffffff1660e01b8152600401610c769190612c97565b602060405180830381600087803b158015610c9057600080fd5b505af1158015610ca4573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610cc8919061277b565b15610cd65760019050610cdb565b600090505b919050565b3373ffffffffffffffffffffffffffffffffffffffff16600f60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614610d3a57600080fd5b600f60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc479081150290604051600060405180830381858888f19350505050158015610da2573d6000803e3d6000fd5b50565b610dc083838360405180602001604052806000815250611261565b505050565b600b5481565b6000806002600084815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169050600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415610e74576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610e6b90612f6d565b60405180910390fd5b80915050919050565b600d8054610e8a90613276565b80601f0160208091040260200160405190810160405280929190818152602001828054610eb690613276565b8015610f035780601f10610ed857610100808354040283529160200191610f03565b820191906000526020600020905b815481529060010190602001808311610ee657829003601f168201915b505050505081565b60008073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff161415610f7c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610f7390612eed565b60405180910390fd5b600360008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050919050565b6000600854905090565b6000600854421015610fe25760009050611017565b6008544210158015610ff657506009544211155b156110045760019050611017565b60095442106110165760029050611017565b5b90565b600a60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600080600090506001600281111561105b5761105a6133b1565b5b611063610fcd565b6002811115611075576110746133b1565b5b141561108557600b5490506110bf565b600280811115611098576110976133b1565b5b6110a0610fcd565b60028111156110b2576110b16133b1565b5b14156110be57600c5490505b5b60006012600085815260200190815260200160002054146110f157601260008481526020019081526020016000205490505b600060105482611101919061310c565b9050808261110f91906130b6565b91508192505050919050565b60606001805461112a90613276565b80601f016020809104026020016040519081016040528092919081815260200182805461115690613276565b80156111a35780601f10611178576101008083540402835291602001916111a3565b820191906000526020600020905b81548152906001019060200180831161118657829003601f168201915b5050505050905090565b6111bf6111b861193f565b8383611d68565b5050565b3373ffffffffffffffffffffffffffffffffffffffff16600f60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161461121d57600080fd5b80600f60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050565b61127261126c61193f565b83611a6c565b6112b1576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016112a890612fcd565b60405180910390fd5b6112bd84848484611ed5565b50505050565b600e80546112d090613276565b80601f01602080910402602001604051908101604052809291908181526020018280546112fc90613276565b80156113495780601f1061131e57610100808354040283529160200191611349565b820191906000526020600020905b81548152906001019060200180831161132c57829003601f168201915b505050505081565b6060600061135e83611f31565b9050600d81600e60405160200161137793929190612c66565b604051602081830303815290604052905080915050919050565b600060028111156113a5576113a46133b1565b5b6113ad610fcd565b60028111156113bf576113be6133b1565b5b1415611400576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016113f790612d8d565b60405180910390fd5b60016002811115611414576114136133b1565b5b61141c610fcd565b600281111561142e5761142d6133b1565b5b141561147d5761143d33610c19565b61147c576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161147390612dad565b60405180910390fd5b5b600061148882611040565b9050803410156114cd576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016114c490612e6d565b60405180910390fd5b6114d682612098565b3373ffffffffffffffffffffffffffffffffffffffff166114f683610dcb565b73ffffffffffffffffffffffffffffffffffffffff1614611692573073ffffffffffffffffffffffffffffffffffffffff16611531836108f3565b73ffffffffffffffffffffffffffffffffffffffff1614611587576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161157e90612dcd565b60405180910390fd5b600061159283610dcb565b90503073ffffffffffffffffffffffffffffffffffffffff166342842e0e6115b985610dcb565b33866040518463ffffffff1660e01b81526004016115d993929190612cb2565b600060405180830381600087803b1580156115f357600080fd5b505af1158015611607573d6000803e3d6000fd5b5050505060126000848152602001908152602001600020549150600060105483611631919061310c565b905060008184611641919061313d565b90508273ffffffffffffffffffffffffffffffffffffffff166108fc829081150290604051600060405180830381858888f19350505050158015611689573d6000803e3d6000fd5b505050506116fc565b600f60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc829081150290604051600060405180830381858888f193505050501580156116fa573d6000803e3d6000fd5b505b5050565b3373ffffffffffffffffffffffffffffffffffffffff1661172083610dcb565b73ffffffffffffffffffffffffffffffffffffffff1614611776576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161176d90612e2d565b60405180910390fd5b8060126000848152602001908152602001600020819055505050565b6000600560008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16905092915050565b3373ffffffffffffffffffffffffffffffffffffffff16600f60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff161461188057600080fd5b8060108190555050565b60007f01ffc9a7000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149050919050565b6118fd81611a00565b61193c576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161193390612f6d565b60405180910390fd5b50565b600033905090565b816004600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550808273ffffffffffffffffffffffffffffffffffffffff166119ba83610dcb565b73ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92560405160405180910390a45050565b60008073ffffffffffffffffffffffffffffffffffffffff166002600084815260200190815260200160002060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614159050919050565b600080611a7883610dcb565b90508073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff161480611aba5750611ab98185611792565b5b80611af857508373ffffffffffffffffffffffffffffffffffffffff16611ae0846108f3565b73ffffffffffffffffffffffffffffffffffffffff16145b91505092915050565b8273ffffffffffffffffffffffffffffffffffffffff16611b2182610dcb565b73ffffffffffffffffffffffffffffffffffffffff1614611b77576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611b6e90612e0d565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff161415611be7576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611bde90612e8d565b60405180910390fd5b611bf28383836120b3565b611bfd600082611947565b6001600360008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254611c4d919061313d565b925050819055506001600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254611ca491906130b6565b92505081905550816002600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550808273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a4611d638383836120b8565b505050565b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff161415611dd7576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611dce90612ead565b60405180910390fd5b80600560008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c3183604051611ec89190612d35565b60405180910390a3505050565b611ee0848484611b01565b611eec848484846120bd565b611f2b576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611f2290612ded565b60405180910390fd5b50505050565b60606000821415611f79576040518060400160405280600181526020017f30000000000000000000000000000000000000000000000000000000000000008152509050612093565b600082905060005b60008214611fab578080611f94906132d9565b915050600a82611fa4919061310c565b9150611f81565b60008167ffffffffffffffff811115611fc757611fc661343e565b5b6040519080825280601f01601f191660200182016040528015611ff95781602001600182028036833780820191505090505b50905060008290508593505b6000841461208b57600a8461201a9190613322565b603061202691906130b6565b60f81b82826120349061324c565b925082815181106120485761204761340f565b5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a905350600a84612084919061310c565b9350612005565b819450505050505b919050565b6120a181611a00565b6120b0576120af3382612254565b5b50565b505050565b505050565b60006120de8473ffffffffffffffffffffffffffffffffffffffff16612272565b15612247578373ffffffffffffffffffffffffffffffffffffffff1663150b7a0261210761193f565b8786866040518563ffffffff1660e01b81526004016121299493929190612ce9565b602060405180830381600087803b15801561214357600080fd5b505af192505050801561217457506040513d601f19601f8201168201806040525081019061217191906127d5565b60015b6121f7573d80600081146121a4576040519150601f19603f3d011682016040523d82523d6000602084013e6121a9565b606091505b506000815114156121ef576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016121e690612ded565b60405180910390fd5b805181602001fd5b63150b7a0260e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19161491505061224c565b600190505b949350505050565b61226e828260405180602001604052806000815250612295565b5050565b6000808273ffffffffffffffffffffffffffffffffffffffff163b119050919050565b61229f83836122f0565b6122ac60008484846120bd565b6122eb576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016122e290612ded565b60405180910390fd5b505050565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff161415612360576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161235790612f2d565b60405180910390fd5b61236981611a00565b156123a9576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016123a090612e4d565b60405180910390fd5b6123b5600083836120b3565b6001600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825461240591906130b6565b92505081905550816002600083815260200190815260200160002060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550808273ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a46124c6600083836120b8565b5050565b60006124dd6124d88461302d565b613008565b9050828152602081018484840111156124f9576124f8613472565b5b61250484828561320a565b509392505050565b60008135905061251b81613953565b92915050565b6000813590506125308161396a565b92915050565b6000815190506125458161396a565b92915050565b60008135905061255a81613981565b92915050565b60008151905061256f81613981565b92915050565b600082601f83011261258a5761258961346d565b5b813561259a8482602086016124ca565b91505092915050565b6000813590506125b281613998565b92915050565b6000602082840312156125ce576125cd61347c565b5b60006125dc8482850161250c565b91505092915050565b600080604083850312156125fc576125fb61347c565b5b600061260a8582860161250c565b925050602061261b8582860161250c565b9150509250929050565b60008060006060848603121561263e5761263d61347c565b5b600061264c8682870161250c565b935050602061265d8682870161250c565b925050604061266e868287016125a3565b9150509250925092565b600080600080608085870312156126925761269161347c565b5b60006126a08782880161250c565b94505060206126b18782880161250c565b93505060406126c2878288016125a3565b925050606085013567ffffffffffffffff8111156126e3576126e2613477565b5b6126ef87828801612575565b91505092959194509250565b600080604083850312156127125761271161347c565b5b60006127208582860161250c565b925050602061273185828601612521565b9150509250929050565b600080604083850312156127525761275161347c565b5b60006127608582860161250c565b9250506020612771858286016125a3565b9150509250929050565b6000602082840312156127915761279061347c565b5b600061279f84828501612536565b91505092915050565b6000602082840312156127be576127bd61347c565b5b60006127cc8482850161254b565b91505092915050565b6000602082840312156127eb576127ea61347c565b5b60006127f984828501612560565b91505092915050565b6000602082840312156128185761281761347c565b5b6000612826848285016125a3565b91505092915050565b600080604083850312156128465761284561347c565b5b6000612854858286016125a3565b9250506020612865858286016125a3565b9150509250929050565b61287881613171565b82525050565b61288781613183565b82525050565b600061289882613073565b6128a28185613089565b93506128b2818560208601613219565b6128bb81613481565b840191505092915050565b6128cf816131f8565b82525050565b60006128e08261307e565b6128ea818561309a565b93506128fa818560208601613219565b61290381613481565b840191505092915050565b60006129198261307e565b61292381856130ab565b9350612933818560208601613219565b80840191505092915050565b6000815461294c81613276565b61295681866130ab565b945060018216600081146129715760018114612982576129b5565b60ff198316865281860193506129b5565b61298b8561305e565b60005b838110156129ad5781548189015260018201915060208101905061298e565b838801955050505b50505092915050565b60006129cb60188361309a565b91506129d682613492565b602082019050919050565b60006129ee60218361309a565b91506129f9826134bb565b604082019050919050565b6000612a1160228361309a565b9150612a1c8261350a565b604082019050919050565b6000612a3460328361309a565b9150612a3f82613559565b604082019050919050565b6000612a5760258361309a565b9150612a62826135a8565b604082019050919050565b6000612a7a60238361309a565b9150612a85826135f7565b604082019050919050565b6000612a9d601c8361309a565b9150612aa882613646565b602082019050919050565b6000612ac0602a8361309a565b9150612acb8261366f565b604082019050919050565b6000612ae360248361309a565b9150612aee826136be565b604082019050919050565b6000612b0660198361309a565b9150612b118261370d565b602082019050919050565b6000612b2960158361309a565b9150612b3482613736565b602082019050919050565b6000612b4c60298361309a565b9150612b578261375f565b604082019050919050565b6000612b6f603e8361309a565b9150612b7a826137ae565b604082019050919050565b6000612b9260208361309a565b9150612b9d826137fd565b602082019050919050565b6000612bb560198361309a565b9150612bc082613826565b602082019050919050565b6000612bd860188361309a565b9150612be38261384f565b602082019050919050565b6000612bfb60218361309a565b9150612c0682613878565b604082019050919050565b6000612c1e60198361309a565b9150612c29826138c7565b602082019050919050565b6000612c41602e8361309a565b9150612c4c826138f0565b604082019050919050565b612c60816131ee565b82525050565b6000612c72828661293f565b9150612c7e828561290e565b9150612c8a828461293f565b9150819050949350505050565b6000602082019050612cac600083018461286f565b92915050565b6000606082019050612cc7600083018661286f565b612cd4602083018561286f565b612ce16040830184612c57565b949350505050565b6000608082019050612cfe600083018761286f565b612d0b602083018661286f565b612d186040830185612c57565b8181036060830152612d2a818461288d565b905095945050505050565b6000602082019050612d4a600083018461287e565b92915050565b6000602082019050612d6560008301846128c6565b92915050565b60006020820190508181036000830152612d8581846128d5565b905092915050565b60006020820190508181036000830152612da6816129be565b9050919050565b60006020820190508181036000830152612dc6816129e1565b9050919050565b60006020820190508181036000830152612de681612a04565b9050919050565b60006020820190508181036000830152612e0681612a27565b9050919050565b60006020820190508181036000830152612e2681612a4a565b9050919050565b60006020820190508181036000830152612e4681612a6d565b9050919050565b60006020820190508181036000830152612e6681612a90565b9050919050565b60006020820190508181036000830152612e8681612ab3565b9050919050565b60006020820190508181036000830152612ea681612ad6565b9050919050565b60006020820190508181036000830152612ec681612af9565b9050919050565b60006020820190508181036000830152612ee681612b1c565b9050919050565b60006020820190508181036000830152612f0681612b3f565b9050919050565b60006020820190508181036000830152612f2681612b62565b9050919050565b60006020820190508181036000830152612f4681612b85565b9050919050565b60006020820190508181036000830152612f6681612ba8565b9050919050565b60006020820190508181036000830152612f8681612bcb565b9050919050565b60006020820190508181036000830152612fa681612bee565b9050919050565b60006020820190508181036000830152612fc681612c11565b9050919050565b60006020820190508181036000830152612fe681612c34565b9050919050565b60006020820190506130026000830184612c57565b92915050565b6000613012613023565b905061301e82826132a8565b919050565b6000604051905090565b600067ffffffffffffffff8211156130485761304761343e565b5b61305182613481565b9050602081019050919050565b60008190508160005260206000209050919050565b600081519050919050565b600081519050919050565b600082825260208201905092915050565b600082825260208201905092915050565b600081905092915050565b60006130c1826131ee565b91506130cc836131ee565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0382111561310157613100613353565b5b828201905092915050565b6000613117826131ee565b9150613122836131ee565b92508261313257613131613382565b5b828204905092915050565b6000613148826131ee565b9150613153836131ee565b92508282101561316657613165613353565b5b828203905092915050565b600061317c826131ce565b9050919050565b60008115159050919050565b60007fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b60008190506131c98261393f565b919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b6000613203826131bb565b9050919050565b82818337600083830152505050565b60005b8381101561323757808201518184015260208101905061321c565b83811115613246576000848401525b50505050565b6000613257826131ee565b9150600082141561326b5761326a613353565b5b600182039050919050565b6000600282049050600182168061328e57607f821691505b602082108114156132a2576132a16133e0565b5b50919050565b6132b182613481565b810181811067ffffffffffffffff821117156132d0576132cf61343e565b5b80604052505050565b60006132e4826131ee565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82141561331757613316613353565b5b600182019050919050565b600061332d826131ee565b9150613338836131ee565b92508261334857613347613382565b5b828206905092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600080fd5b600080fd5b600080fd5b600080fd5b6000601f19601f8301169050919050565b7f53616c6520686173206e6f742073746172746564207965740000000000000000600082015250565b7f50524553414c453a596f7520617265206e6f742057686974656c69737465642060008201527f2100000000000000000000000000000000000000000000000000000000000000602082015250565b7f546f6b656e206973206e6f7420617661696c61626c6520746f207472616e736660008201527f6572000000000000000000000000000000000000000000000000000000000000602082015250565b7f4552433732313a207472616e7366657220746f206e6f6e20455243373231526560008201527f63656976657220696d706c656d656e7465720000000000000000000000000000602082015250565b7f4552433732313a207472616e736665722066726f6d20696e636f72726563742060008201527f6f776e6572000000000000000000000000000000000000000000000000000000602082015250565b7f4f6e6c79204f776e6572732063616e206368616e6765205072696365206f662060008201527f4e46540000000000000000000000000000000000000000000000000000000000602082015250565b7f4552433732313a20746f6b656e20616c7265616479206d696e74656400000000600082015250565b7f496e73756666696369656e742046756e64732073656e7420666f7220546f6b6560008201527f6e20507572636861736500000000000000000000000000000000000000000000602082015250565b7f4552433732313a207472616e7366657220746f20746865207a65726f2061646460008201527f7265737300000000000000000000000000000000000000000000000000000000602082015250565b7f4552433732313a20617070726f766520746f2063616c6c657200000000000000600082015250565b7f596f7520617265206e6f7420746865206f776e65720000000000000000000000600082015250565b7f4552433732313a2061646472657373207a65726f206973206e6f74206120766160008201527f6c6964206f776e65720000000000000000000000000000000000000000000000602082015250565b7f4552433732313a20617070726f76652063616c6c6572206973206e6f7420746f60008201527f6b656e206f776e6572206e6f7220617070726f76656420666f7220616c6c0000602082015250565b7f4552433732313a206d696e7420746f20746865207a65726f2061646472657373600082015250565b7f496e76616c69642053616c65204f70656e696e672054696d6500000000000000600082015250565b7f4552433732313a20696e76616c696420746f6b656e2049440000000000000000600082015250565b7f4552433732313a20617070726f76616c20746f2063757272656e74206f776e6560008201527f7200000000000000000000000000000000000000000000000000000000000000602082015250565b7f496e76616c69642053616c6520436c6f73696e672054696d6500000000000000600082015250565b7f4552433732313a2063616c6c6572206973206e6f7420746f6b656e206f776e6560008201527f72206e6f7220617070726f766564000000000000000000000000000000000000602082015250565b600381106139505761394f6133b1565b5b50565b61395c81613171565b811461396757600080fd5b50565b61397381613183565b811461397e57600080fd5b50565b61398a8161318f565b811461399557600080fd5b50565b6139a1816131ee565b81146139ac57600080fd5b5056fea2646970667358221220b875e7dd148d499449e2ee47fead87e80c5ee807ac6e7ba6e12ab4340ac4a86164736f6c63430008070033",
};
export const SaleTrackerABI = [
  {
    inputs: [
      {
        internalType: "address",
        name: "user",
        type: "address",
      },
      {
        internalType: "address",
        name: "saleAddress",
        type: "address",
      },
    ],
    name: "addUserSale",
    outputs: [],
    stateMutability: "nonpayable",
    type: "function",
  },
  {
    inputs: [
      {
        internalType: "address",
        name: "_owner",
        type: "address",
      },
    ],
    stateMutability: "nonpayable",
    type: "constructor",
  },
  {
    inputs: [],
    name: "totalSales",
    outputs: [
      {
        internalType: "uint256",
        name: "",
        type: "uint256",
      },
    ],
    stateMutability: "view",
    type: "function",
  },
  {
    inputs: [
      {
        internalType: "address",
        name: "",
        type: "address",
      },
    ],
    name: "userNumberOfSales",
    outputs: [
      {
        internalType: "uint256",
        name: "",
        type: "uint256",
      },
    ],
    stateMutability: "view",
    type: "function",
  },
  {
    inputs: [
      {
        internalType: "address",
        name: "",
        type: "address",
      },
      {
        internalType: "uint256",
        name: "",
        type: "uint256",
      },
    ],
    name: "userToSale",
    outputs: [
      {
        internalType: "address",
        name: "",
        type: "address",
      },
    ],
    stateMutability: "view",
    type: "function",
  },
];
export const SaleTrackerBytecode = {
  object:
    "608060405234801561001057600080fd5b506040516105f53803806105f58339818101604052810190610032919061008e565b80600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050610109565b600081519050610088816100f2565b92915050565b6000602082840312156100a4576100a36100ed565b5b60006100b284828501610079565b91505092915050565b60006100c6826100cd565b9050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600080fd5b6100fb816100bb565b811461010657600080fd5b50565b6104dd806101186000396000f3fe608060405234801561001057600080fd5b506004361061004c5760003560e01c80636605ff6614610051578063ed0bd6681461006f578063edd117061461009f578063f6fec657146100cf575b600080fd5b6100596100eb565b6040516100669190610398565b60405180910390f35b6100896004803603810190610084919061031f565b6100f1565b604051610096919061037d565b60405180910390f35b6100b960048036038101906100b491906102b2565b61013f565b6040516100c69190610398565b60405180910390f35b6100e960048036038101906100e491906102df565b610157565b005b60035481565b6000602052816000526040600020818154811061010d57600080fd5b906000526020600020016000915091509054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60016020528060005260406000206000915090505481565b60018060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020546101a291906103b3565b600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055506000808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819080600181540180825580915050600190039060005260206000200160009091909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505050565b60008135905061029781610479565b92915050565b6000813590506102ac81610490565b92915050565b6000602082840312156102c8576102c7610474565b5b60006102d684828501610288565b91505092915050565b600080604083850312156102f6576102f5610474565b5b600061030485828601610288565b925050602061031585828601610288565b9150509250929050565b6000806040838503121561033657610335610474565b5b600061034485828601610288565b92505060206103558582860161029d565b9150509250929050565b61036881610409565b82525050565b6103778161043b565b82525050565b6000602082019050610392600083018461035f565b92915050565b60006020820190506103ad600083018461036e565b92915050565b60006103be8261043b565b91506103c98361043b565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff038211156103fe576103fd610445565b5b828201905092915050565b60006104148261041b565b9050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000819050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600080fd5b61048281610409565b811461048d57600080fd5b50565b6104998161043b565b81146104a457600080fd5b5056fea2646970667358221220b77a2195515108f416f291152666a3bd936a1eda2e533fad98a46d344e16e84164736f6c63430008070033",
};

// Ethereum
// Goerli Network Deployed Address
export const SaleTrackerAddress = "0xCb4b8D2aD6C1B0FbF5d6cD42e8738679E9A50971";

// Tron
// Nile

export const SaleTrackerNileAddress = "TMN4Xc2XUVi4TmiiL7FzwTrYDh1JL7QWA6";

// Shasta
export const SaleTrackerShastaAddress = "TCAVB43es6PJFNyMsDSGcDCsEgCDVXeGpw";
//

// Polygon
export const SaleTrackerAddressPolygon =
  "0xbc851B173B953D058af4DD88bA3e8D465D749e38";

//
const ethers = require("ethers");

// const provider = ethers.providers.getDefaultProvider(
//   'wss://little-quaint-liquid.ethereum-goerli.discover.quiknode.pro/b2367619fda52ade145960cc52e5bd23015b30ae/',
// )
// const privateKey =
//   'd09eb95eabc1d6e02595e40aa8899a58e78d616e8618752a492a72df1f0f49d1'
// const wallet = new ethers.Wallet(privateKey, provider)
// export const SaleTrackerContract = new ethers.Contract(
//   SaleTrackerAddress,
//   SaleTrackerABI,
//   wallet,
// )

async function getBlockchainSpecificWebsiteRentContract(
  Blockchain,
  NetworkChain,
  web3modalRef
) {
  let websiteRentContract = null;
  if (Blockchain == "tron") {
    websiteRentContract = await getTronWebsiteRentContract(NetworkChain);
  } else if (!Blockchain || Blockchain == "ethereum") {
    websiteRentContract = await getCustomNetworkWebsiteRentContract(
      NetworkChain,
      web3modalRef
    );
  } else if (Blockchain == "polygon") {
    websiteRentContract = await getPolygonWebsiteRentContract(
      NetworkChain,
      web3modalRef
    );
  }
  return websiteRentContract;
}

async function getBlockchainSpecificSaleTrackerContract(
  Blockchain,
  NetworkChain,
  web3modalRef
) {
  let contract = null;
  if (Blockchain == "tron") {
    contract = await getTronSaleTrackerContract(NetworkChain);
    // console.log("want to return Sale Tracker contract ", contract);
    return contract;
  } else if (!Blockchain || Blockchain == "ethereum") {
    contract = await getCustomNetworkSaleTrackerContract(
      NetworkChain,
      web3modalRef
    );
    return contract;
  } else if (Blockchain == "polygon") {
    //to be implemented yet
    let WhitelistTracker = await getPolygonSaleTrackerContract(
      NetworkChain,
      web3modalRef
    );
    return WhitelistTracker;
  } else {
    return null;
  }
}
async function getBlockchainSpecificSaleFactoryContract(
  Blockchain,
  NetworkChain,
  web3modalRef,
  contractAddress
) {
  let contract = null;
  if (Blockchain == "tron") {
    contract = await getTronSaleFactory(NetworkChain, contractAddress);
    // console.log("want to return whitelistTracker ", contract);
    return contract;
  } else if (
    !Blockchain ||
    Blockchain == "ethereum" ||
    Blockchain == "polygon"
  ) {
    contract = await getCustomNetworkSaleContract(
      NetworkChain,
      web3modalRef,
      contractAddress
    );
    return contract;
  } else {
    return null;
  }
  return contract;
}

export const fetchSaleAddresses = async (
  contract,
  owner,
  setter,
  Blockchain
) => {
  let TrackerContract = contract;
  try {
    // console.log("getting sales for", owner, "in", TrackerContract);

    if (Blockchain == "tron") {
      // console.log({ contract, owner, setter, Blockchain });
      let numSales = await TrackerContract.userNumberOfSales(owner).call();
      let allSales = [];
      //   console.log("Owner has ", numSales, " Sales");
      numSales=parseInt(numSales);

      if(!numSales)return null;
      for (let index = 0; index < numSales; index++) {
        let SaleAddress = await TrackerContract.userToSale(owner, index).call();
        allSales.push(SaleAddress);
      }
      //   console.log("sale address fetched ", allSales);

      if (setter != undefined) {
        setter(allSales);
      }

      return allSales;
    } else if (
      !Blockchain ||
      Blockchain == "ethereum" ||
      Blockchain == "polygon"
    ) {
      let allSales = [];
      //   console.log("owner is ", owner);
      await TrackerContract.userNumberOfSales(owner).then(async (numSales) => {
        // console.log("Owner has ", numSales, " Sales");
        for (let index = 0; index < numSales; index++) {
          let SaleAddress = await TrackerContract.userToSale(owner, index);
          allSales.push(SaleAddress);
        }
        // console.log("sale address fetched ", allSales);
        if (setter != undefined) {
          setter(allSales);
        }

        return allSales;
      });
      return allSales;
    }
  } catch (e) {
    console.log("unable to get sale addresses", e);
  }
  // let totalSales = await TrackerContract.totalSales();
};
export const fetchSales = async (
  NetworkChain,
  web3modalRef,
  owner,
  arraySetter,
  Blockchain,
  loader,
) => {
  let websiteRentContract = await getBlockchainSpecificWebsiteRentContract(
    Blockchain,
    NetworkChain,
    web3modalRef
  );
  let TrackerContract = await getBlockchainSpecificSaleTrackerContract(
    Blockchain,
    NetworkChain,
    web3modalRef
  );
  try {
    // console.log("fetching array of sales");
    await fetchSaleAddresses(
      TrackerContract,
      owner,
      arraySetter,
      Blockchain
    ).then(async (Sales) => {

      let allSales = [];
      // console.log('iterating over')
      //   console.log("Salesin sale.js");
      if (!Sales || totalSales == 0) {
        if(loader)
        loader(false)
        return null;
      }
      let totalSales = Sales?.length;
      // console.log("total sales are ", totalSales);

      // console.log("sales are ", Sales);
      Sales.map(async (_Sale, index) => {
        let hostedWebsite;
        let rentTime;
        if (Blockchain == "tron") {
          hostedWebsite = await websiteRentContract
            .deploymentToWebsite(_Sale)
            .call();

          rentTime = await websiteRentContract.rentTime(hostedWebsite).call();
        } else if (
          !Blockchain ||
          Blockchain == "ethereum" ||
          Blockchain == "polygon"
        ) {
          // console.log("calling deploymentToWebsite from ", websiteRentContract);
          hostedWebsite = await websiteRentContract.deploymentToWebsite(_Sale);
          // console.log("_" + hostedWebsite + "_");
          if (hostedWebsite != "")
            rentTime = await websiteRentContract.rentTime(hostedWebsite);

          console.log({
            rentTime,
            hostedWebsite,
          });
        } else {
          // no support
        }

        hostedWebsite =
          rentTime * 1000 > new Date().getTime() ? hostedWebsite : null;

        let SaleContract = await getBlockchainSpecificSaleFactoryContract(
          Blockchain,
          NetworkChain,
          web3modalRef,
          _Sale
        );
        // console.log("sale contract is ", SaleContract);
        let name, symbol, baseURI, startTime, endTime;
        if (Blockchain == "tron") {
          name = await SaleContract.name().call();
          symbol = await SaleContract.symbol().call();
          baseURI = await SaleContract.baseURI().call();
          startTime = await SaleContract.startTime().call();
          endTime = await SaleContract.endTime().call();
        } else if (
          !Blockchain ||
          Blockchain == "ethereum" ||
          Blockchain == "polygon"
        ) {
          name = await SaleContract.name();
          symbol = await SaleContract.symbol();
          baseURI = await SaleContract.baseURI();
          startTime = await SaleContract.startTime();
          endTime = await SaleContract.endTime();
        } else {
          return null;
        }

        let SaleInstance = {
          id: index + 1,
          name,
          symbol,
          baseURI,
          address: _Sale,
          website:
            !hostedWebsite || hostedWebsite === "" ? null : hostedWebsite,
          startTime,
          endTime,
          owner,
          rentTime: rentTime * 1000,
        };
        // console.log("Sale instance", SaleInstance);
        allSales.push(SaleInstance);
        if (index + 1 == totalSales) {
          if (arraySetter) {
            arraySetter(allSales);
          }
          if (loader) {
            loader(false);
          }
          return allSales;
        }
      });
    });
  } catch (e) {
    console.log("unable to fetch deploymments", e);
  }
};
export const getCustomNetworkSaleContract = async (
  network,
  web3modalRef,
  contractAddress
) => {
  let signer = await getProviderOrSigner(network, web3modalRef, true);
  let SaleContract = new ethers.ContractFactory(
    SaleABI,
    SaleBytecode.object,
    signer
  );
  if (contractAddress) {
    SaleContract = new ethers.Contract(contractAddress, SaleABI, signer);
  }
  return SaleContract;
};
export const getPolygonSaleTrackerContract = async (network, web3modalRef) => {
  let signer = await getProviderOrSigner(network, web3modalRef, true);
  const SaleTrackerContract = new ethers.Contract(
    SaleTrackerAddressPolygon,
    SaleTrackerABI,
    signer
  );

  return SaleTrackerContract;
};

export const getCustomNetworkSaleTrackerContract = async (
  network,
  web3modalRef
) => {
  let signer = await getProviderOrSigner(network, web3modalRef, true);
  const SaleTrackerContract = new ethers.Contract(
    SaleTrackerAddress,
    SaleTrackerABI,
    signer
  );

  return SaleTrackerContract;
};

export const getTronSaleTrackerContract = async (network) => {
  let contractAddress = null;
  if (network == "shasta") {
    contractAddress = SaleTrackerShastaAddress;
  }
  let tronWeb = await getNetworkTronweb(network);
  let contract = await tronWeb.contract().at(contractAddress);
  // console.log("sale tracker is ", contract);
  return contract;
};
export const getTronSaleFactory = async (network, contractAddress) => {
  let tronWeb = await getNetworkTronweb(network);
  let contract = await tronWeb.contract().at(contractAddress);
  return contract;
};
